# Simulador de Ingresos HC - EspecificaciÃ³n Frontend
## GridRetail - Modelador de Comisiones HC

**VersiÃ³n:** 1.2  
**Fecha:** 2026-01-27  
**Para:** Claude Code - Desarrollo Frontend  

---

## Changelog

| VersiÃ³n | Fecha | Cambios |
|---------|-------|---------|
| **1.2** | **2026-01-27** | **IntegraciÃ³n con MÃ³dulo de Cuotas v2.3**: uso de `get_hc_effective_quota()` para obtener metas, soporte de prorrateo, nuevo hook `useHCQuota()`, interface `HCQuota`, diagrama de integraciÃ³n de mÃ³dulos |
| 1.1 | 2026-01-25 | Actualizado para mapeo flexible de partidas (v2.1 BD): queries con `commission_item_ventas`, tipos con `TipoVentaMapping`, helpers para nombres efectivos |
| 1.0 | 2026-01-25 | VersiÃ³n inicial |

---

## 1. RESUMEN EJECUTIVO

El Simulador de Ingresos permite proyectar las comisiones de un HC (asesor/supervisor) basÃ¡ndose en un esquema de comisiones y datos de venta (reales o hipotÃ©ticos). 

Existen **dos variantes** del simulador:

| Variante | Usuario | PropÃ³sito |
|----------|---------|-----------|
| **Simulador Gerencia** | Analista, Gerente, JV | Evaluar esquemas, comparar escenarios, proyectar costos |
| **Simulador HC** | Asesor, Supervisor | "Â¿CuÃ¡nto voy a ganar?" - Ver proyecciÃ³n personal |

Ambos usan la misma lÃ³gica de cÃ¡lculo (`simulate_hc_commission`), pero con diferentes interfaces y permisos.

### 1.1 IntegraciÃ³n de MÃ³dulos (v1.2)

El Simulador integra datos de **4 mÃ³dulos**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE DATOS â†’ SIMULADOR                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   CUOTAS    â”‚     â”‚ COMISIONES  â”‚     â”‚    INAR     â”‚                   â”‚
â”‚  â”‚             â”‚     â”‚             â”‚     â”‚             â”‚                   â”‚
â”‚  â”‚ â€¢ hc_quotas â”‚     â”‚ â€¢ schemes   â”‚     â”‚ lineas_inar â”‚                   â”‚
â”‚  â”‚ â€¢ ss_quota  â”‚     â”‚ â€¢ items     â”‚     â”‚ (ventas     â”‚                   â”‚
â”‚  â”‚ â€¢ breakdown â”‚     â”‚ â€¢ locks     â”‚     â”‚  oficiales) â”‚                   â”‚
â”‚  â”‚ â€¢ prorrateo â”‚     â”‚ â€¢ pxq       â”‚     â”‚             â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                   â”‚                   â”‚                          â”‚
â”‚         â”‚    get_hc_        â”‚                   â”‚                          â”‚
â”‚         â”‚    effective_     â”‚                   â”‚                          â”‚
â”‚         â”‚    quota()        â”‚                   â”‚                          â”‚
â”‚         â”‚                   â”‚                   â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                             â”‚                                              â”‚
â”‚                             â–¼                                              â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                   â”‚     SIMULADOR       â”‚                                  â”‚
â”‚                   â”‚                     â”‚                                  â”‚
â”‚                   â”‚ simulate_hc_        â”‚                                  â”‚
â”‚                   â”‚ commission()        â”‚                                  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                              â”‚                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â”‚                    â”‚                    â”‚                        â”‚
â”‚         â–¼                    â–¼                    â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ PENALIDADES â”‚     â”‚  RESULTADO  â”‚     â”‚   PERFIL    â”‚                   â”‚
â”‚  â”‚             â”‚     â”‚             â”‚     â”‚             â”‚                   â”‚
â”‚  â”‚ predict_hc_ â”‚     â”‚ Fijo+Var+   â”‚     â”‚ average,    â”‚                   â”‚
â”‚  â”‚ penalties() â”‚     â”‚ PxQ+Bonos   â”‚     â”‚ top20, etc  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ -Penalid.   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Punto clave v1.2:** Las **metas (cuotas)** del HC vienen del **MÃ³dulo de Cuotas** (`hc_quotas`), NO del esquema de comisiones. El esquema define las **fÃ³rmulas y variables**, las cuotas definen las **metas a cumplir**.

---

## 2. FLUJOS DE USUARIO POR ROL

### 2.1 Gerente Comercial / Analista (Simulador Gerencia)

#### Flujo A: Simular con perfil predefinido
```
1. Navegar a Comisiones > Simulador
2. Seleccionar esquema (dropdown de esquemas vigentes/draft)
3. Seleccionar perfil de ventas:
   - Promedio (75% de cuota)
   - Top 20% (115% de cuota)
   - Nuevo ingreso (50% de cuota)
   - Cuota 100%
4. Sistema calcula automÃ¡ticamente
5. Ver desglose: Fijo + Variable + PxQ + Bonos - Penalidades = Neto
6. Opcional: Ajustar cantidades manualmente
7. Opcional: Comparar con otro escenario
```

#### Flujo B: Simular con datos manuales
```
1. Seleccionar esquema
2. Click "Ingresar datos manualmente"
3. Llenar cantidades por partida (OSS, OPP, VR, RENO, etc.)
4. Opcional: Desglosar por plan (para restricciones)
5. Sistema calcula en tiempo real
6. Ver resultado con detalle de cada partida
```

#### Flujo C: Simular HC especÃ­fico con datos reales (v1.2 actualizado)
```
1. Seleccionar esquema
2. Click "Simular HC especÃ­fico"
3. Buscar y seleccionar un usuario HC
4. Sistema obtiene:
   a. Cuota efectiva del HC (de hc_quotas via get_hc_effective_quota)
   b. Factor de prorrateo si aplica
   c. Ventas reales del perÃ­odo (de lineas_inar o ventas BU)
   d. HistÃ³rico de penalidades para predicciÃ³n
5. Ver proyecciÃ³n personalizada con:
   - Metas ajustadas por prorrateo
   - Ventas reales del mes
   - Penalidades predichas
```

#### Flujo D: Comparar dos escenarios
```
1. Crear Escenario A (esquema + datos de venta)
2. Click "Agregar escenario para comparar"
3. Crear Escenario B (diferente esquema o mismos datos)
4. Ver tabla comparativa side-by-side
5. Ver diferencias resaltadas
```

#### Flujo E: Proyectar costo total para el SSNN
```
1. Seleccionar esquema vigente
2. Click "ProyecciÃ³n de costos"
3. Sistema calcula para todos los HC activos
4. Muestra: Total Fijos + Total Variables + Total PxQ + Total Bonos
5. Opcional: Exportar a Excel
```

### 2.2 Jefe de Ventas

**Mismo flujo que Gerente**, pero:
- Solo puede ver esquemas aprobados (no drafts)
- No puede ver proyecciÃ³n de costos totales
- Puede simular HC de su zona Ãºnicamente

### 2.3 Asesor / Supervisor (Simulador HC Personal) (v1.2 actualizado)

#### Flujo: Ver mi proyecciÃ³n
```
1. Navegar a "Mi ComisiÃ³n" (acceso directo en dashboard)
2. Sistema obtiene automÃ¡ticamente:
   a. Mi cuota del mes (de hc_quotas via get_hc_effective_quota)
   b. Mi factor de prorrateo (si ingresÃ© a mitad de mes)
   c. Esquema vigente asignado
   d. Mis ventas del mes actual (de INAR/BU)
3. Sistema muestra:
   - Mi cuota efectiva (ya prorrateada si aplica)
   - Mis ventas vs mi meta
   - Mi proyecciÃ³n de comisiÃ³n
   - Mis penalidades predichas
4. Puede ajustar "Â¿QuÃ© pasa si vendo X mÃ¡s?"
5. Ver desglose detallado
6. Ver progreso vs meta (grÃ¡fico)
```

**Nota v1.2:** Si el HC iniciÃ³ el dÃ­a 15 de un mes de 31 dÃ­as, su cuota efectiva es ~55% de la cuota nominal (17/31 = 0.548). El simulador muestra esto claramente.

---

## 3. PANTALLAS Y COMPONENTES

### 3.1 Simulador Gerencia (`/comisiones/simulador`)

**PropÃ³sito:** Herramienta de anÃ¡lisis para evaluar esquemas y proyectar comisiones

**Permisos:** ADMIN, GERENTE_COMERCIAL, GERENTE_GENERAL, JEFE_VENTAS, BACKOFFICE_OPERACIONES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Simulador de Ingresos HC                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CONFIGURACIÃ“N                                                       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Esquema: [Esquema Asesor Enero 2026 (Aprobado) â–¼]                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Datos de venta:                                                     â”‚   â”‚
â”‚  â”‚ (â—) Perfil predefinido  ( ) Manual  ( ) HC especÃ­fico              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Perfil: [Promedio â–¼] [Top 20%] [Nuevo] [Cuota 100%] [Personalizado]â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ â˜‘ Incluir predicciÃ³n de penalidades (requiere seleccionar HC)      â”‚   â”‚
â”‚  â”‚ â˜ Comparar con otro escenario                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DATOS DE VENTA                                          [Limpiar]  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Partida       â”‚ Meta  â”‚ Cantidad â”‚ Cumpl. â”‚ Indicador             â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  OSS           â”‚ 31.5  â”‚ [__24__] â”‚  76%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  76%       â”‚   â”‚
â”‚  â”‚  OPP           â”‚ 5.6   â”‚ [___4__] â”‚  71%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  71%       â”‚   â”‚
â”‚  â”‚  VR_BASE       â”‚ 21    â”‚ [__16__] â”‚  76%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  76%       â”‚   â”‚
â”‚  â”‚  VR_CAPTURA    â”‚ 11.9  â”‚ [___9__] â”‚  76%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  76%       â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  RENO_SS       â”‚ 20    â”‚ [__15__] â”‚  75%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  75%       â”‚   â”‚
â”‚  â”‚  PACK_SS       â”‚ 10    â”‚ [___8__] â”‚  80%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%       â”‚   â”‚
â”‚  â”‚  PREPAGO       â”‚ 50    â”‚ [__38__] â”‚  76%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  76%       â”‚   â”‚
â”‚  â”‚  MEP (Seguros) â”‚ 2     â”‚ [___2__] â”‚ 100%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ“     â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  Cuota SS Totalâ”‚ 70    â”‚    53    â”‚  76%   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  76%       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                                                    [Calcular ComisiÃ³n]     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 Resultado de SimulaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESULTADO DE SIMULACIÃ“N                                    [ğŸ“¥ Exportar]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   INGRESO PROYECTADO                                               â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚   â”‚                                                             â”‚  â”‚   â”‚
â”‚  â”‚   â”‚    S/. 1,847.50                                            â”‚  â”‚   â”‚
â”‚  â”‚   â”‚    â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚  â”‚   â”‚
â”‚  â”‚   â”‚    Cumplimiento global: 76%                                 â”‚  â”‚   â”‚
â”‚  â”‚   â”‚                                                             â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   DESGLOSE                                                          â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚   â”‚ Concepto          â”‚ Monto      â”‚ Detalle                     â”‚ â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚   â”‚ Sueldo Fijo       â”‚ S/. 1,050  â”‚ Base mensual                â”‚ â”‚   â”‚
â”‚  â”‚   â”‚ Variable          â”‚ S/.   612  â”‚ 76% de S/.805 (principales) â”‚ â”‚   â”‚
â”‚  â”‚   â”‚ Adicionales       â”‚ S/.   135  â”‚ RENO + PACK + PP            â”‚ â”‚   â”‚
â”‚  â”‚   â”‚ PxQ               â”‚ S/.    75  â”‚ 5 portas Ã— S/.15            â”‚ â”‚   â”‚
â”‚  â”‚   â”‚ Bonos             â”‚ S/.     0  â”‚ NPS no alcanzado            â”‚ â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚   â”‚ BRUTO             â”‚ S/. 1,872  â”‚                             â”‚ â”‚   â”‚
â”‚  â”‚   â”‚ (-) Penalidades   â”‚ S/.   -25  â”‚ 1 Port Out predicho         â”‚ â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚   â”‚ NETO PROYECTADO   â”‚ S/. 1,847  â”‚                             â”‚ â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [Ver detalle por partida â–¼]                                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 Detalle por Partida (Expandible)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DETALLE POR PARTIDA                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â–¼ PARTIDAS PRINCIPALES                                         S/. 612.00 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Partida    â”‚ Meta â”‚ Logro â”‚ Cumpl. â”‚ Variable â”‚ ComisiÃ³n â”‚ Estado  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ OSS        â”‚ 31.5 â”‚ 24    â”‚ 76.2%  â”‚ S/.324   â”‚ S/.247   â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚ OPP        â”‚ 5.6  â”‚ 4     â”‚ 71.4%  â”‚ S/.82    â”‚ S/.59    â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚ VR_BASE    â”‚ 21   â”‚ 16    â”‚ 76.2%  â”‚ S/.308   â”‚ S/.235   â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚ VR_CAPTURA â”‚ 11.9 â”‚ 9     â”‚ 75.6%  â”‚ S/.174   â”‚ S/.132   â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚            â”‚      â”‚       â”‚        â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚   â”‚
â”‚  â”‚            â”‚      â”‚       â”‚        â”‚ SUBTOTAL â”‚ S/.612   â”‚         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â–¼ PARTIDAS ADICIONALES                                         S/. 135.00 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Partida    â”‚ Meta â”‚ Logro â”‚ Cumpl. â”‚ Variable â”‚ ComisiÃ³n â”‚ Estado  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ RENO_SS    â”‚ 20   â”‚ 15    â”‚ 75%    â”‚ S/.120   â”‚ S/.90    â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚  â””â”€ ğŸ”’ MEP â”‚ 2    â”‚ 2     â”‚ 100%   â”‚ -        â”‚ -        â”‚ âœ“ Libre â”‚   â”‚
â”‚  â”‚ PACK_SS    â”‚ 10   â”‚ 8     â”‚ 80%    â”‚ S/.60    â”‚ S/.48    â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚  â””â”€ ğŸ”’ MEP â”‚ 2    â”‚ 2     â”‚ 100%   â”‚ -        â”‚ -        â”‚ âœ“ Libre â”‚   â”‚
â”‚  â”‚ PREPAGO    â”‚ 50   â”‚ 38    â”‚ 76%    â”‚ -        â”‚ S/.-3    â”‚ âœ“ OK    â”‚   â”‚
â”‚  â”‚            â”‚      â”‚       â”‚        â”‚ SUBTOTAL â”‚ S/.135   â”‚         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â–¶ PARTIDAS PxQ                                                  S/. 75.00 â”‚
â”‚  â–¶ BONOS                                                          S/. 0.00 â”‚
â”‚  â–¶ PENALIDADES PREDICHAS                                        S/. -25.00 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.4 ComparaciÃ³n de Escenarios

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPARACIÃ“N DE ESCENARIOS                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ESCENARIO A                   â”‚ ESCENARIO B                   â”‚         â”‚
â”‚  â”‚ Esquema Asesor Ene (Actual)   â”‚ Esquema Asesor Feb (Draft)    â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚                               â”‚                               â”‚         â”‚
â”‚  â”‚ Sueldo Fijo:      S/. 1,050  â”‚ Sueldo Fijo:      S/. 1,050  â”‚         â”‚
â”‚  â”‚ Variable:         S/.   612  â”‚ Variable:         S/.   680  â”‚ â†‘ +68   â”‚
â”‚  â”‚ PxQ:              S/.    75  â”‚ PxQ:              S/.    90  â”‚ â†‘ +15   â”‚
â”‚  â”‚ Bonos:            S/.     0  â”‚ Bonos:            S/.    50  â”‚ â†‘ +50   â”‚
â”‚  â”‚ Penalidades:      S/.   -25  â”‚ Penalidades:      S/.   -25  â”‚         â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚
â”‚  â”‚ NETO:             S/. 1,712  â”‚ NETO:             S/. 1,845  â”‚ â†‘ +133  â”‚
â”‚  â”‚                               â”‚                               â”‚         â”‚
â”‚  â”‚        [Ver detalle]         â”‚        [Ver detalle]          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚  DIFERENCIA: Escenario B paga S/. 133 mÃ¡s (+7.8%)                          â”‚
â”‚                                                                             â”‚
â”‚  [Intercambiar] [Nuevo escenario A] [Nuevo escenario B] [Exportar]         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.5 SelecciÃ³n de HC EspecÃ­fico (Modal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seleccionar HC para SimulaciÃ³n                                       [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ” Buscar: [_________________]  [Buscar]                                  â”‚
â”‚                                                                             â”‚
â”‚  Filtrar por:                                                               â”‚
â”‚  Tienda: [Todas â–¼]  Rol: [Todos â–¼]  Zona: [Todas â–¼]                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ( ) â”‚ Nombre              â”‚ CÃ³digo         â”‚ Tienda      â”‚ Rol     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ (â—) â”‚ Ana GarcÃ­a LÃ³pez    â”‚ PBD_AGARCIA    â”‚ TE Agustino â”‚ Asesor  â”‚   â”‚
â”‚  â”‚ ( ) â”‚ Carlos PÃ©rez M.     â”‚ PBD_CPEREZ     â”‚ TE VES      â”‚ Asesor  â”‚   â”‚
â”‚  â”‚ ( ) â”‚ MarÃ­a RodrÃ­guez     â”‚ PBD_MRODRIGUEZ â”‚ TE VMT      â”‚ Asesor  â”‚   â”‚
â”‚  â”‚ ( ) â”‚ Juan Torres         â”‚ PBD_JTORRES    â”‚ TE Comas    â”‚ Superv. â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Mostrando 4 de 45 usuarios                                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ HC Seleccionado: Ana GarcÃ­a LÃ³pez                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Cuota del mes (hc_quotas):                                         â”‚   â”‚
â”‚  â”‚   â€¢ SS Total: 70 â†’ Efectiva: 58 (prorrateo 0.83)                   â”‚   â”‚
â”‚  â”‚   â€¢ Inicio: 2026-01-05                                              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Ventas del mes (INAR): 47 lÃ­neas SS                                â”‚   â”‚
â”‚  â”‚ Penalidades histÃ³ricas: 2 en Ãºltimos 6 meses                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                                        [Cancelar]  [Simular con este HC]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.6 Simulador HC Personal (`/mi-comision`) (v1.2 actualizado)

**PropÃ³sito:** Vista simplificada para que el HC vea su proyecciÃ³n personal

**Permisos:** ASESOR, ASESOR_REFERENTE, COORDINADOR, SUPERVISOR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mi ComisiÃ³n - Enero 2026                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   Hola, Ana GarcÃ­a ğŸ‘‹                                              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   Tu proyecciÃ³n de ingresos este mes:                              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚   â”‚                                                             â”‚  â”‚   â”‚
â”‚  â”‚   â”‚         S/. 1,847                                          â”‚  â”‚   â”‚
â”‚  â”‚   â”‚         â•â•â•â•â•â•â•â•â•â•                                          â”‚  â”‚   â”‚
â”‚  â”‚   â”‚                                                             â”‚  â”‚   â”‚
â”‚  â”‚   â”‚   Fijo: S/.1,050  +  Variable: S/.797  =  Bruto: S/.1,847  â”‚  â”‚   â”‚
â”‚  â”‚   â”‚                                                             â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TU CUOTA Y PRORRATEO (v1.2)                                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Cuota SS asignada:     70 unidades                                â”‚   â”‚
â”‚  â”‚  Tu fecha de inicio:    05/Ene/2026                                â”‚   â”‚
â”‚  â”‚  Factor prorrateo:      0.87 (27 de 31 dÃ­as)                       â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚  TU CUOTA EFECTIVA:     61 unidades                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ’¡ Tu meta estÃ¡ ajustada porque ingresaste el dÃ­a 5 del mes       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TU AVANCE DEL MES                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  LÃ­neas SS                                                          â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  77%             â”‚   â”‚
â”‚  â”‚  47 de 61 (meta efectiva)                                          â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Te faltan 14 lÃ­neas para llegar al 100%                           â”‚   â”‚
â”‚  â”‚  Si vendes 7 mÃ¡s llegas al 89% (+S/. 85 estimado)                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [Â¿QuÃ© pasa si vendo mÃ¡s? â–¼]                                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.7 Desglose de ComisiÃ³n HC (v1.2 actualizado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Desglose de tu ComisiÃ³n                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SUELDO FIJO                                                    S/. 1,050  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  PARTIDAS PRINCIPALES                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Partida     â”‚ Tu meta* â”‚ Vendiste â”‚ Cumpliste â”‚ Ganas              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ OSS         â”‚ 27.4     â”‚ 24       â”‚ 88%       â”‚ S/. 285            â”‚   â”‚
â”‚  â”‚ OPP         â”‚ 4.9      â”‚ 4        â”‚ 82%       â”‚ S/. 67             â”‚   â”‚
â”‚  â”‚ VR LLAA     â”‚ 18.3     â”‚ 16       â”‚ 87%       â”‚ S/. 268            â”‚   â”‚
â”‚  â”‚ VR Captura  â”‚ 10.4     â”‚ 9        â”‚ 87%       â”‚ S/. 151            â”‚   â”‚
â”‚  â”‚             â”‚          â”‚          â”‚ SUBTOTAL  â”‚ S/. 771            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  * Metas ajustadas por tu prorrateo (0.87)                                 â”‚
â”‚                                                                             â”‚
â”‚  PARTIDAS ADICIONALES                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Partida     â”‚ Tu meta  â”‚ Vendiste â”‚ Cumpliste â”‚ Ganas              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ RenovaciÃ³n  â”‚ 17.4     â”‚ 15       â”‚ 86%       â”‚ S/. 103            â”‚   â”‚
â”‚  â”‚ Pack SS     â”‚ 8.7      â”‚ 8        â”‚ 92%       â”‚ S/. 55             â”‚   â”‚
â”‚  â”‚ Prepago     â”‚ 43.5     â”‚ 38       â”‚ 87%       â”‚ S/. -              â”‚   â”‚
â”‚  â”‚             â”‚          â”‚          â”‚ SUBTOTAL  â”‚ S/. 158            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ”’ CANDADOS                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Para cobrar RENO y PACK necesitas vender 2 seguros MEP             â”‚   â”‚
â”‚  â”‚ Tu avance: 2 de 2 âœ“ CANDADO LIBERADO                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  BONOS PxQ                                                       S/. 75    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Portabilidad: 5 unidades Ã— S/.15 (rango 61-80%) = S/. 75           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  âš ï¸ PENALIDADES ESTIMADAS                                       S/. -25   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Basado en tu histÃ³rico, estimamos:                                  â”‚   â”‚
â”‚  â”‚ - Port Out: ~1 caso (S/.25)                                         â”‚   â”‚
â”‚  â”‚ Esto es una estimaciÃ³n. El monto real puede variar.                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  TOTAL PROYECTADO                                               S/. 2,029  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.8 ProyecciÃ³n de Costos SSNN (Solo Gerencia)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProyecciÃ³n de Costos - Enero 2026                            [ğŸ“¥ Exportar]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Esquema: Asesor Enero 2026 (Aprobado)                                     â”‚
â”‚  Perfil de ventas: Promedio histÃ³rico                                       â”‚
â”‚  HC incluidos: 42 asesores activos                                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   COSTO TOTAL PROYECTADO                                           â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   S/. 77,595.00                                                    â”‚   â”‚
â”‚  â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                 â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  DESGLOSE                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Concepto          â”‚ Total          â”‚ Promedio por HC                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Sueldos Fijos     â”‚ S/. 44,100     â”‚ S/. 1,050                       â”‚  â”‚
â”‚  â”‚ Variables         â”‚ S/. 25,704     â”‚ S/. 612                         â”‚  â”‚
â”‚  â”‚ PxQ               â”‚ S/. 3,150      â”‚ S/. 75                          â”‚  â”‚
â”‚  â”‚ Bonos             â”‚ S/. 2,100      â”‚ S/. 50                          â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ BRUTO             â”‚ S/. 75,054     â”‚ S/. 1,787                       â”‚  â”‚
â”‚  â”‚ (+) Cargas social â”‚ S/. 2,541      â”‚ (estimado 3.4%)                 â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ COSTO TOTAL       â”‚ S/. 77,595     â”‚ S/. 1,848                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  DISTRIBUCIÃ“N POR TIENDA                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tienda        â”‚ HC â”‚ Costo Fijo â”‚ Costo Var. â”‚ Total      â”‚ % Tot  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ TE Agustino   â”‚ 3  â”‚ S/. 3,150  â”‚ S/. 1,836  â”‚ S/. 4,986  â”‚ 6.4%   â”‚   â”‚
â”‚  â”‚ TE VES        â”‚ 4  â”‚ S/. 4,200  â”‚ S/. 2,448  â”‚ S/. 6,648  â”‚ 8.6%   â”‚   â”‚
â”‚  â”‚ TE VMT        â”‚ 3  â”‚ S/. 3,150  â”‚ S/. 1,836  â”‚ S/. 4,986  â”‚ 6.4%   â”‚   â”‚
â”‚  â”‚ ...           â”‚    â”‚            â”‚            â”‚            â”‚        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. REGLAS DE NEGOCIO DEL SIMULADOR

### 4.1 CÃ¡lculo de ComisiÃ³n por Porcentaje

```
Para cada partida tipo "percentage":

1. cumplimiento = logro / meta_efectiva  â† (v1.2: usa cuota prorrateada)
2. SI cumplimiento < min_fulfillment:
      comision = 0
3. SI tiene_tope Y cumplimiento > cap_percentage:
      cumplimiento_efectivo = cap_percentage
   SINO:
      cumplimiento_efectivo = cumplimiento
4. comision = variable_amount Ã— cumplimiento_efectivo
```

### 4.2 CÃ¡lculo de ComisiÃ³n PxQ

```
Para cada partida tipo "pxq":

1. Determinar cumplimiento_global (total SS vendido / cuota SS efectiva)
2. Buscar escala PxQ donde:
   min_fulfillment <= cumplimiento_global <= max_fulfillment
3. SI no hay escala aplicable:
      comision = 0
4. SINO:
      comision = cantidad_vendida Ã— amount_per_unit
```

### 4.3 VerificaciÃ³n de Candados

```
Para cada partida con candados:

1. Obtener lista de candados activos
2. Para cada candado:
   - SI tipo = "min_quantity":
     verificar = ventas[required_item_type] >= required_value
   - SI tipo = "min_amount":
     verificar = monto[required_item_type] >= required_value
   - SI tipo = "min_percentage":
     verificar = cumplimiento[required_item_type] >= required_value
3. SI todos los candados verificados:
      candado_liberado = true
      partida comisiona normalmente
4. SINO:
      candado_liberado = false
      comision_partida = 0
```

### 4.4 AplicaciÃ³n de Restricciones

```
Para cada restricciÃ³n activa:

1. SI tipo = "max_percentage":
   max_unidades = cuota_efectiva Ã— max_percentage
   unidades_plan = ventas_por_plan[plan_code]
   SI unidades_plan > max_unidades:
      exceso = unidades_plan - max_unidades
      logro_efectivo = logro - exceso

2. SI tipo = "max_quantity":
   SI ventas_plan[plan_code] > max_quantity:
      exceso = ventas_plan[plan_code] - max_quantity
      logro_efectivo = logro - exceso
```

### 4.5 PredicciÃ³n de Penalidades

```
1. Obtener historial de penalidades del HC (Ãºltimos 6 meses)
2. Para cada tipo de penalidad predecible:
   - Calcular promedio mensual
   - Calcular desviaciÃ³n estÃ¡ndar
   - Calcular confianza = 1 - (stddev / promedio)
3. Multiplicar promedio Ã— monto_equivalencia
4. Retornar suma de penalidades predichas con confianza
```

### 4.6 Perfiles de Venta Predefinidos

| Perfil | DescripciÃ³n | Multiplicador |
|--------|-------------|---------------|
| `average` | HC promedio | 75% de cada meta efectiva |
| `top20` | Top 20% performers | 115% de cada meta efectiva |
| `new` | Nuevo ingreso | 50% de cada meta efectiva |
| `quota100` | Cumple exacto | 100% de cada meta efectiva |

### 4.7 Fuentes de Datos de Venta

| Fuente | Prioridad | DescripciÃ³n |
|--------|-----------|-------------|
| `lineas_inar` | 1 | Ventas confirmadas (oficial) |
| `ventas` | 2 | Ventas declarativas (BU) |
| Manual | 3 | Ingresado por usuario |

Para HC especÃ­fico: Se prioriza INAR si existe data del perÃ­odo; si no, se usa BU.

### 4.8 ObtenciÃ³n de Cuota Efectiva (v1.2 NUEVO)

```
Para obtener la cuota del HC:

1. Llamar get_hc_effective_quota(user_id, year, month)
2. Retorna:
   - ss_quota: Cuota asignada nominal
   - effective_quota: Cuota con prorrateo aplicado
   - proration_factor: Factor (0-1)
   - quota_breakdown: {"OSS": 31.5, "VR": 21, ...}
   - start_date: Fecha de inicio (si aplica prorrateo)

3. La meta de cada partida se calcula:
   meta_partida = quota_breakdown[partida] Ã— proration_factor

4. Si no existe cuota en hc_quotas para el perÃ­odo:
   - Usar cuota del esquema como fallback
   - Mostrar advertencia: "Sin cuota asignada, usando valores del esquema"
```

---

## 5. MATRIZ DE PERMISOS

| Funcionalidad | ADMIN | GERENTE_COMERCIAL | GERENTE_GENERAL | JEFE_VENTAS | BACKOFFICE_OP | ASESOR/SUPERV |
|---------------|-------|-------------------|-----------------|-------------|---------------|---------------|
| Ver simulador gerencia | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ |
| Simular cualquier esquema | âœ… | âœ… | âœ… | âœ… (solo aprobados) | âœ… | âŒ |
| Simular esquemas draft | âœ… | âœ… | âŒ | âŒ | âœ… | âŒ |
| Simular cualquier HC | âœ… | âœ… | âœ… | âœ… (su zona) | âœ… | âŒ |
| Comparar escenarios | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ |
| Ver proyecciÃ³n costos | âœ… | âœ… | âœ… | âŒ | âœ… | âŒ |
| Exportar resultados | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ |
| Ver Mi ComisiÃ³n (personal) | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| Simular "Â¿QuÃ© pasa si?" | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |

---

## 6. INTEGRACIÃ“N CON DATOS EXISTENTES

### 6.1 Obtener Esquema Vigente

```typescript
// Para simulador gerencia - todos los esquemas
const { data: schemes } = await supabase
  .from('commission_schemes')
  .select('*')
  .in('status', ['aprobado', 'draft'])
  .order('year', { ascending: false })
  .order('month', { ascending: false });

// Para simulador HC - solo el asignado
const { data: assignment } = await supabase
  .from('commission_hc_assignments')
  .select(`
    *,
    scheme:commission_schemes(*)
  `)
  .eq('user_id', currentUserId)
  .eq('is_active', true)
  .single();
```

### 6.2 Obtener Cuota Efectiva del HC (v1.2 NUEVO)

```typescript
// Obtener cuota del mÃ³dulo de Cuotas (NO del esquema de comisiones)
const { data: hcQuota, error } = await supabase
  .rpc('get_hc_effective_quota', {
    p_user_id: userId,
    p_year: year,
    p_month: month
  });

// Resultado:
interface HCEffectiveQuota {
  ss_quota: number;           // Cuota nominal asignada
  effective_quota: number;    // Cuota con prorrateo
  proration_factor: number;   // Factor 0-1
  quota_breakdown: {          // Desglose por partida
    OSS: number;
    OPP: number;
    VR_BASE: number;
    VR_CAPTURA: number;
    // ... etc
  };
  start_date: string | null;  // Fecha inicio si hay prorrateo
  store_id: string;
  store_name: string;
}

// Si no hay cuota asignada, usar fallback del esquema
if (!hcQuota || error) {
  console.warn('Sin cuota asignada, usando valores del esquema');
  // Usar quotas de commission_scheme_items
}
```

### 6.3 Obtener Partidas del Esquema (v2.1)

```typescript
// OpciÃ³n A: Query directo con joins
const { data: items } = await supabase
  .from('commission_scheme_items')
  .select(`
    *,
    item_type:commission_item_types(*),
    preset:partition_presets(*),
    locks:commission_item_locks(*),
    pxq_scales:commission_pxq_scales(*),
    mapped_tipos_venta:commission_item_ventas(
      tipo_venta_id,
      cuenta_linea,
      cuenta_equipo,
      tipo_venta:tipos_venta(codigo, nombre, categoria)
    )
  `)
  .eq('scheme_id', schemeId)
  .eq('is_active', true)
  .order('display_order');

// OpciÃ³n B: Usar la vista consolidada (recomendado)
const { data: items } = await supabase
  .from('vw_scheme_item_ventas')
  .select('*')
  .eq('scheme_id', schemeId)
  .eq('is_active', true)
  .order('display_order');

// La vista retorna:
// - item_name: COALESCE(custom_name, item_type.name, preset.name)
// - tipos_venta_mapeados: JSON array con tipos de venta que suman a esta partida
```

**Nota v2.1:** Las partidas pueden:
1. Tener `item_type_id` (referencia al catÃ¡logo legacy)
2. Tener `preset_id` (usar preset como plantilla)
3. Tener `custom_name` (partida completamente personalizada)
4. El mapeo real estÃ¡ en `commission_item_ventas`

### 6.4 Obtener Ventas Reales de INAR y Mapear a Partidas (v2.1)

```typescript
// Paso 1: Obtener ventas del mes para un HC especÃ­fico
const { data: sales } = await supabase
  .from('lineas_inar')
  .select('*')
  .eq('vchvendedordni', userDni)
  .gte('dtefecha_alta', startOfMonth)
  .lte('dtefecha_alta', endOfMonth);

// Paso 2: Clasificar cada venta por tipo_venta
const classifiedSales = sales.map(sale => ({
  ...sale,
  tipo_venta_codigo: classifyInarRecord(sale) // Determina OSS_BASE, VR_MONO, etc.
}));

// Paso 3: Agrupar usando los mapeos de la partida
// Cada partida tiene tipos_venta_mapeados con cuenta_linea/cuenta_equipo
function groupSalesByPartition(
  sales: ClassifiedSale[], 
  schemeItems: SchemeItemWithMapping[]
): SalesData {
  const result: SalesData = {};
  
  for (const item of schemeItems) {
    const itemName = item.custom_name || item.item_type?.code || item.preset?.code;
    let count = 0;
    
    // Cada partida tiene su lista de tipos_venta mapeados
    for (const mapping of item.mapped_tipos_venta || []) {
      const matchingSales = sales.filter(
        s => s.tipo_venta_codigo === mapping.tipo_venta.codigo
      );
      
      for (const sale of matchingSales) {
        // Una venta puede contar como lÃ­nea, equipo, o ambos
        if (mapping.cuenta_linea && sale.tiene_linea) count++;
        if (mapping.cuenta_equipo && sale.tiene_equipo) count++;
      }
    }
    
    result[itemName] = count;
  }
  
  return result;
}
```

**Nota v2.1:** El mapeo flexible permite que:
- Un tipo de venta (ej: PACK_OSS) sume a mÃºltiples partidas (OSS como lÃ­nea, PACK_SS como equipo)
- Las partidas agrupen mÃºltiples tipos de venta (ej: OSS = OSS_BASE + OSS_CAPTURA + PACK_OSS.lÃ­nea)

### 6.5 Obtener Ventas Declarativas (BU)

```typescript
const { data: ventasBU } = await supabase
  .from('ventas')
  .select('*')
  .eq('usuario_id', userId)
  .eq('estado', 'aprobada')
  .gte('fecha_venta', startOfMonth)
  .lte('fecha_venta', endOfMonth);
```

### 6.6 Llamar FunciÃ³n de SimulaciÃ³n

```typescript
// Usar funciÃ³n de PostgreSQL
const { data: result } = await supabase
  .rpc('simulate_hc_commission', {
    p_scheme_id: schemeId,
    p_sales_data: salesData,      // JSONB: {"OSS": 24, "OPP": 4, ...}
    p_plan_breakdown: planData,    // JSONB opcional
    p_user_id: userId              // Para predicciÃ³n penalidades
  });

// Resultado
interface SimulationResult {
  fixed_salary: number;
  variable_commission: number;
  pxq_commission: number;
  bonus_commission: number;
  total_gross: number;
  predicted_penalties: number;
  total_net: number;
  global_fulfillment: number;
  details: ItemDetail[];
}
```

### 6.7 Obtener Historial de Penalidades

```typescript
const { data: penalties } = await supabase
  .rpc('predict_hc_penalties', {
    p_user_id: userId,
    p_months_lookback: 6
  });

// Resultado
interface PenaltyPrediction {
  penalty_code: string;
  penalty_name: string;
  predicted_quantity: number;
  predicted_amount: number;
  confidence: number;  // 0.00 - 1.00
}
```

---

## 7. COMPONENTES TÃ‰CNICOS

### 7.1 Estructura de Archivos

```
app/
â””â”€â”€ (dashboard)/
    â””â”€â”€ comisiones/
        â””â”€â”€ simulador/
            â””â”€â”€ page.tsx                    # Simulador Gerencia
    â””â”€â”€ mi-comision/
        â””â”€â”€ page.tsx                        # Simulador HC Personal

components/
â””â”€â”€ simulador/
    â”œâ”€â”€ SchemeSelector.tsx                  # Dropdown de esquemas
    â”œâ”€â”€ ProfileSelector.tsx                 # Selector de perfiles
    â”œâ”€â”€ SalesInputTable.tsx                 # Tabla editable de ventas
    â”œâ”€â”€ SimulationResult.tsx                # Resultado principal
    â”œâ”€â”€ ResultBreakdown.tsx                 # Desglose por partida
    â”œâ”€â”€ ScenarioComparison.tsx              # ComparaciÃ³n side-by-side
    â”œâ”€â”€ HCSelector.tsx                      # Modal selecciÃ³n de HC
    â”œâ”€â”€ ProgressBar.tsx                     # Barra de progreso
    â”œâ”€â”€ CostProjection.tsx                  # ProyecciÃ³n de costos
    â”œâ”€â”€ WhatIfCalculator.tsx                # Mini calculadora "Â¿QuÃ© pasa si?"
    â”œâ”€â”€ QuotaProrationBadge.tsx             # Badge de prorrateo (v1.2)
    â””â”€â”€ EffectiveQuotaCard.tsx              # Card cuota efectiva (v1.2)

lib/
â””â”€â”€ simulador/
    â”œâ”€â”€ types.ts                            # Tipos TypeScript
    â”œâ”€â”€ calculations.ts                     # Funciones de cÃ¡lculo cliente
    â”œâ”€â”€ profiles.ts                         # Generadores de perfiles
    â””â”€â”€ formatters.ts                       # Formateo de montos

hooks/
â”œâ”€â”€ useSimulation.ts                        # Hook de simulaciÃ³n
â””â”€â”€ useHCQuota.ts                           # Hook de cuota (v1.2)
```

### 7.2 Tipos TypeScript (v1.2)

```typescript
// types.ts

// ========== CUOTAS (v1.2) ==========

interface HCQuota {
  id: string;
  user_id: string;
  store_quota_id: string;
  store_id: string;
  year: number;
  month: number;
  ss_quota: number;                    // Cuota nominal
  quota_breakdown: QuotaBreakdown;     // Desglose por partida
  start_date: string | null;           // Para prorrateo
  proration_factor: number;            // 0-1
  prorated_ss_quota: number | null;    // Cuota prorrateada
  status: 'draft' | 'pending_approval' | 'approved' | 'archived';
}

interface QuotaBreakdown {
  [partitionCode: string]: number;     // Ej: {"OSS": 31.5, "VR": 21}
}

interface HCEffectiveQuota {
  ss_quota: number;
  effective_quota: number;
  proration_factor: number;
  quota_breakdown: QuotaBreakdown;
  start_date: string | null;
  store_id: string;
  store_name: string;
  has_quota: boolean;                  // false si usa fallback del esquema
}

// ========== VENTAS ==========

interface SalesData {
  [partitionName: string]: number;     // Clave es el nombre de la partida
}

interface PlanBreakdown {
  [planCode: string]: number;
}

// ========== SIMULACIÃ“N ==========

interface SimulationInput {
  schemeId: string;
  salesData: SalesData;
  planBreakdown?: PlanBreakdown;
  userId?: string;
  hcQuota?: HCEffectiveQuota;          // v1.2: Cuota del HC
}

interface SimulationResult {
  fixedSalary: number;
  variableCommission: number;
  pxqCommission: number;
  bonusCommission: number;
  totalGross: number;
  predictedPenalties: number;
  totalNet: number;
  globalFulfillment: number;
  details: ItemDetail[];
  quotaInfo?: {                        // v1.2: Info de cuota usada
    source: 'hc_quotas' | 'scheme_fallback';
    proration_factor: number;
    effective_quota: number;
  };
}

// ========== MAPEO DE PARTIDAS ==========

interface TipoVentaMapping {
  tipoVentaId: string;
  codigo: string;
  nombre: string;
  categoria: string;
  cuentaLinea: boolean;
  cuentaEquipo: boolean;
}

interface ItemDetail {
  id: string;
  name: string;
  itemTypeCode: string | null;
  presetCode: string | null;
  customName: string | null;
  category: 'principal' | 'adicional' | 'pxq' | 'bono';
  calculationType: 'percentage' | 'pxq' | 'binary';
  tiposVentaMapeados: TipoVentaMapping[];
  quota: number | null;                 // Meta nominal
  effectiveQuota: number | null;        // v1.2: Meta con prorrateo
  sales: number;
  fulfillment: number;
  effectiveFulfillment: number;
  meetsMinimum: boolean;
  minFulfillment: number;
  lockUnlocked: boolean;
  lockPending: string[];
  restrictionApplied: boolean;
  restrictionDetail: string | null;
  effectiveSales: number;
  commission: number;
}

// ========== ESCENARIOS ==========

interface Scenario {
  id: string;
  name: string;
  schemeId: string;
  schemeName: string;
  salesData: SalesData;
  result: SimulationResult;
}

type SalesProfile = 'average' | 'top20' | 'new' | 'quota100' | 'custom';

// ========== PARTIDAS DEL ESQUEMA ==========

interface SchemeItemWithMapping {
  id: string;
  scheme_id: string;
  item_type_id: string | null;
  preset_id: string | null;
  custom_name: string | null;
  quota: number | null;                 // Meta del esquema (fallback)
  weight: number | null;
  variable_amount: number;
  min_fulfillment: number | null;
  has_cap: boolean;
  is_active: boolean;
  display_order: number;
  item_type?: { code: string; name: string; category: string } | null;
  preset?: { code: string; name: string; default_category: string } | null;
  mapped_tipos_venta: TipoVentaMapping[];
}
```

### 7.3 Hook de Cuota HC (v1.2 NUEVO)

```typescript
// hooks/useHCQuota.ts

import { useState, useEffect, useCallback } from 'react';
import { createClient } from '@/lib/supabase/client';
import { HCEffectiveQuota } from '@/lib/simulador/types';

interface UseHCQuotaOptions {
  userId: string;
  year: number;
  month: number;
  enabled?: boolean;
}

export function useHCQuota({ userId, year, month, enabled = true }: UseHCQuotaOptions) {
  const [quota, setQuota] = useState<HCEffectiveQuota | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  const supabase = createClient();

  const fetchQuota = useCallback(async () => {
    if (!userId || !enabled) return;
    
    setLoading(true);
    setError(null);
    
    try {
      const { data, error: rpcError } = await supabase
        .rpc('get_hc_effective_quota', {
          p_user_id: userId,
          p_year: year,
          p_month: month
        });
      
      if (rpcError) throw rpcError;
      
      if (data) {
        setQuota({
          ss_quota: data.ss_quota,
          effective_quota: data.effective_quota,
          proration_factor: data.proration_factor,
          quota_breakdown: data.quota_breakdown,
          start_date: data.start_date,
          store_id: data.store_id,
          store_name: data.store_name,
          has_quota: true
        });
      } else {
        // No hay cuota asignada
        setQuota({
          ss_quota: 0,
          effective_quota: 0,
          proration_factor: 1,
          quota_breakdown: {},
          start_date: null,
          store_id: '',
          store_name: '',
          has_quota: false
        });
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Error obteniendo cuota');
      setQuota(null);
    } finally {
      setLoading(false);
    }
  }, [supabase, userId, year, month, enabled]);

  useEffect(() => {
    fetchQuota();
  }, [fetchQuota]);

  return { quota, loading, error, refetch: fetchQuota };
}
```

### 7.4 Hook de SimulaciÃ³n (v1.2 actualizado)

```typescript
// hooks/useSimulation.ts

import { useState, useCallback } from 'react';
import { createClient } from '@/lib/supabase/client';
import { SimulationInput, SimulationResult, HCEffectiveQuota } from '@/lib/simulador/types';

export function useSimulation() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState<SimulationResult | null>(null);
  const [error, setError] = useState<string | null>(null);
  
  const supabase = createClient();

  const simulate = useCallback(async (input: SimulationInput) => {
    setLoading(true);
    setError(null);
    
    try {
      const { data, error: rpcError } = await supabase
        .rpc('simulate_hc_commission', {
          p_scheme_id: input.schemeId,
          p_sales_data: input.salesData,
          p_plan_breakdown: input.planBreakdown || null,
          p_user_id: input.userId || null
        });
      
      if (rpcError) throw rpcError;
      
      // v1.2: Agregar info de cuota al resultado
      const resultWithQuota = transformResult(data);
      if (input.hcQuota) {
        resultWithQuota.quotaInfo = {
          source: input.hcQuota.has_quota ? 'hc_quotas' : 'scheme_fallback',
          proration_factor: input.hcQuota.proration_factor,
          effective_quota: input.hcQuota.effective_quota
        };
      }
      
      setResult(resultWithQuota);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Error en simulaciÃ³n');
    } finally {
      setLoading(false);
    }
  }, [supabase]);

  const reset = useCallback(() => {
    setResult(null);
    setError(null);
  }, []);

  return { simulate, result, loading, error, reset };
}

function transformResult(data: any): SimulationResult {
  return {
    fixedSalary: data.fixed_salary,
    variableCommission: data.variable_commission,
    pxqCommission: data.pxq_commission,
    bonusCommission: data.bonus_commission,
    totalGross: data.total_gross,
    predictedPenalties: data.predicted_penalties,
    totalNet: data.total_net,
    globalFulfillment: data.global_fulfillment,
    details: data.details || []
  };
}
```

### 7.5 Generador de Perfiles (v1.2 actualizado)

```typescript
// lib/simulador/profiles.ts

import { SchemeItemWithMapping, SalesData, HCEffectiveQuota, SalesProfile } from './types';

export function generateSalesProfile(
  schemeItems: SchemeItemWithMapping[],
  profile: SalesProfile,
  hcQuota?: HCEffectiveQuota      // v1.2: Usar cuota del HC si disponible
): SalesData {
  const multipliers: Record<SalesProfile, number> = {
    average: 0.75,
    top20: 1.15,
    new: 0.50,
    quota100: 1.00,
    custom: 1.00
  };

  const multiplier = multipliers[profile];
  const salesData: SalesData = {};

  for (const item of schemeItems) {
    const itemName = getEffectiveItemName(item);
    
    // v1.2: Priorizar cuota de hc_quotas sobre la del esquema
    let quota: number;
    if (hcQuota?.has_quota && hcQuota.quota_breakdown[itemName]) {
      // Usar cuota del mÃ³dulo Cuotas (ya incluye prorrateo en effective_quota)
      quota = hcQuota.quota_breakdown[itemName] * hcQuota.proration_factor;
    } else if (item.quota) {
      // Fallback: usar cuota del esquema
      quota = item.quota;
    } else {
      continue; // Sin cuota definida
    }
    
    salesData[itemName] = Math.round(quota * multiplier);
  }

  return salesData;
}

// Helper para obtener el nombre efectivo de una partida (v2.1)
export function getEffectiveItemName(item: SchemeItemWithMapping): string {
  return item.custom_name 
    || item.item_type?.code 
    || item.preset?.code 
    || item.id;
}

// Helper para mostrar nombre legible en UI (v2.1)
export function getDisplayName(item: SchemeItemWithMapping): string {
  return item.custom_name 
    || item.item_type?.name 
    || item.preset?.name 
    || 'Partida sin nombre';
}

// Obtener los tipos de venta que suman a una partida (v2.1)
export function getTiposVentaDescripcion(item: SchemeItemWithMapping): string {
  if (!item.mapped_tipos_venta?.length) {
    return 'Sin mapeo definido';
  }
  return item.mapped_tipos_venta
    .map(m => m.codigo)
    .join(', ');
}

// v1.2: Calcular meta efectiva con prorrateo
export function calculateEffectiveQuota(
  nominalQuota: number,
  prorationFactor: number
): number {
  return Math.round(nominalQuota * prorationFactor * 10) / 10;
}

// v1.2: Formatear info de prorrateo para UI
export function formatProrationInfo(
  startDate: string | null,
  prorationFactor: number
): string {
  if (!startDate || prorationFactor >= 1) {
    return 'Mes completo';
  }
  const date = new Date(startDate);
  const day = date.getDate();
  const pct = Math.round(prorationFactor * 100);
  return `Desde dÃ­a ${day} (${pct}% del mes)`;
}
```

---

## 8. ESTADOS DE UI Y FEEDBACK

### 8.1 Estados de Carga

- Cargando esquemas: Skeleton en dropdown
- Cargando cuota HC: Skeleton en card de cuota (v1.2)
- Calculando simulaciÃ³n: Spinner + "Calculando..."
- Cargando datos de HC: Skeleton en tabla de ventas

### 8.2 Mensajes de Feedback

```typescript
// Ã‰xito
toast.success("SimulaciÃ³n completada");
toast.success("Escenario agregado para comparar");

// InformaciÃ³n
toast.info("Usando datos de INAR (confirmados)");
toast.info("No hay datos de INAR, usando BU");
toast.info("Cuota prorrateada aplicada");  // v1.2

// Advertencia
toast.warning("Algunas partidas no cumplen el mÃ­nimo");
toast.warning("Hay candados sin liberar");
toast.warning("Sin cuota asignada, usando valores del esquema");  // v1.2

// Error
toast.error("Error al calcular simulaciÃ³n");
toast.error("No se encontrÃ³ esquema vigente");
toast.error("Error obteniendo cuota del HC");  // v1.2
```

### 8.3 Indicadores Visuales

**Cumplimiento:**
- 0-49%: Rojo (no comisiona)
- 50-79%: Amarillo (comisiona parcial)
- 80-99%: Verde claro (bueno)
- 100%+: Verde oscuro (excelente)

**Candados:**
- ğŸ”’ Cerrado (rojo)
- ğŸ”“ Liberado (verde)

**Restricciones aplicadas:**
- âš ï¸ Badge amarillo indicando ajuste

**Prorrateo (v1.2):**
- ğŸ“… Badge azul indicando dÃ­as trabajados
- Factor mostrado como porcentaje

---

## 9. NAVEGACIÃ“N Y UX

### 9.1 MenÃº

```
ğŸ“Š Comisiones
â”œâ”€â”€ ğŸ“‹ Esquemas
â”œâ”€â”€ ğŸ“¥ Importar
â”œâ”€â”€ âš¡ Simulador          â† Simulador Gerencia
â””â”€â”€ âš ï¸ Penalidades

ğŸ“ˆ Cuotas                  â† v1.2: MÃ³dulo de Cuotas
â”œâ”€â”€ ğŸ“Š Por Tienda
â””â”€â”€ ğŸ‘¥ Por HC

ğŸ‘¤ Mi Cuenta
â”œâ”€â”€ ğŸ’° Mi ComisiÃ³n        â† Simulador HC Personal
â””â”€â”€ ...
```

### 9.2 Accesos Directos

- Desde lista de esquemas: BotÃ³n "âš¡ Simular" abre simulador con ese esquema
- Desde detalle de esquema: BotÃ³n "âš¡ Simular" 
- Dashboard HC: Widget "Mi ComisiÃ³n" con proyecciÃ³n rÃ¡pida
- Desde cuotas HC: Link "Ver simulaciÃ³n" (v1.2)

### 9.3 Responsive

- Desktop: Layout completo con tabla de ventas y resultados side-by-side
- Tablet: Tabla de ventas arriba, resultados abajo
- Mobile: Formulario colapsable, solo resultado visible por defecto

---

## 10. PRÃ“XIMOS PASOS PARA CLAUDE CODE

### Orden recomendado de desarrollo:

1. **Tipos y hooks base** (`lib/simulador/`, `hooks/`)
   - Incluir `useHCQuota` (v1.2)
2. **Componente SalesInputTable** (tabla editable)
3. **Componente SimulationResult** (resultado principal)
4. **Componente QuotaProrationBadge** (v1.2)
5. **PÃ¡gina Simulador Gerencia** (integraciÃ³n)
6. **Componente ResultBreakdown** (desglose)
7. **Componente ScenarioComparison** (comparaciÃ³n)
8. **Modal HCSelector** (selecciÃ³n de HC con cuota)
9. **PÃ¡gina Mi ComisiÃ³n** (simulador HC con prorrateo)
10. **Componente WhatIfCalculator** (mini calculadora)
11. **Componente CostProjection** (proyecciÃ³n costos)

### Dependencias adicionales:

```bash
npm install recharts  # Para grÃ¡ficos de progreso
```

---

## 11. VERIFICACIÃ“N DE INTEGRACIÃ“N

### 11.1 Tablas Referenciadas

| MÃ³dulo | Tablas | Uso en Simulador |
|--------|--------|------------------|
| Core | `usuarios` | Datos del HC (nombre_completo, codigo_asesor) |
| Core | `tiendas` | Nombre de tienda del HC |
| Cuotas | `hc_quotas` | **Cuota efectiva del HC** (v1.2) |
| Cuotas | `store_quotas` | Referencia de cuota de tienda |
| Comisiones | `commission_schemes` | Esquema con fÃ³rmulas |
| Comisiones | `commission_scheme_items` | Partidas y variables |
| Comisiones | `commission_item_ventas` | Mapeo a tipos de venta |
| INAR | `lineas_inar` | Ventas confirmadas |
| Operaciones | `ventas` | Ventas declarativas (BU) |
| Penalidades | `hc_penalties` | HistÃ³rico para predicciÃ³n |

### 11.2 Funciones RPC Utilizadas

| FunciÃ³n | MÃ³dulo | PropÃ³sito |
|---------|--------|-----------|
| `get_hc_effective_quota` | Cuotas | Obtener cuota con prorrateo |
| `simulate_hc_commission` | Comisiones | Calcular comisiÃ³n |
| `predict_hc_penalties` | Penalidades | Predecir penalidades |
| `get_sales_profile` | Comisiones | Generar perfil de ventas |
| `compare_commission_scenarios` | Comisiones | Comparar dos esquemas |

### 11.3 Campos de Usuario (DATA_DICTIONARY v2.3)

```typescript
// Campos correctos de la tabla usuarios:
interface Usuario {
  id: string;              // UUID
  codigo_asesor: string;   // "PBD_AGARCIA"
  dni: string;
  nombre_completo: string; // "Ana GarcÃ­a LÃ³pez"
  email: string | null;
  rol: string;             // "ASESOR", "SUPERVISOR", etc.
  zona: string | null;     // "NORTE", "SUR"
  activo: boolean;
}

// âš ï¸ NO existen estos campos:
// - codigo_entel (usar codigo_asesor)
// - nombres (usar nombre_completo)
// - apellidos (usar nombre_completo)
```

---

**Este documento es la guÃ­a completa para implementar el Simulador de Ingresos. Adjuntar a Claude Code junto con GRIDRETAIL_QUICK_REFERENCE.md, DATA_DICTIONARY.md y MODULO_PENALIDADES_SPEC_v1.1.md**
